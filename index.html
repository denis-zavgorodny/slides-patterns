<!DOCTYPE html>
<html lang="en">
<head>
<title>Patterns & fuctional programming intro</title>


	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="shower-ribbon/styles/screen-16x10.css">
	<style media="screen">
        .slide {
            padding-top: 70px;
        }

	</style>
</head>
<body class="shower list">
	<header class="caption">
        <h1>Patterns & fuctional programming intro</h1>
    </header>

	<section class="slide">
        <h2 class="shout">Patterns</h2>
    </section>

    <section class="slide">
        <h2 >Patterns</h2>
        <blockquote>
            <p>
                <b>Паттерн проектирования</b> — это часто встречающееся решение определённой проблемы при проектировании архитектуры программ.
            </p>
        </blockquote>
    </section>

    <section class="slide">
        <h2 class="shout">Классификация</h2>
    </section>

    <section class="slide">
        <h2>Классификация паттернов</h2>
        <ul>
            <li>Порождающие</li>
            <li>Структурные</li>
            <li>Поведенческие</li>
        </ul>
    </section>
    <section class="slide">
        <h2 class="shout">Порождающие паттерны</h2>
    </section>
    <section class="slide">
        <h2>Порождающие паттерны</h2>
        <ul>
            <li>Фабричный метод (Factory Method)</li>
            <li>Абстрактная фабрика (Abstract Factory)</li>
            <li>Строитель (Builder)</li>
            <li>Прототип (Prototype)</li>
            <li>Одиночка (Singleton)</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Фабричный метод</h2>
        <pre>
            <code>function Bob() {</code>
            <code>    this.prefix = '';</code>
            <code>    this.say = function() {</code>
            <code>        console.log(`${this.prefix}, i'm Bob`);</code>
            <code>    }</code>
            <code>}</code>
            <code>const person = new Bob();</code>
            <code>person.prefix = 'Hello';</code>
            <code>person.say();</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Фабричный метод</h2>
        <pre>
            <code>function Piter() {</code>
            <code>    this.prefix = '';</code>
            <code>    this.say = function () {</code>
            <code>        console.log(`${this.prefix}, i'm Piter`);</code>
            <code>    }</code>
            <code>}</code>
            <code>const person = new Piter();</code>
            <code>person.prefix = 'Hello';</code>
            <code>person.say();</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Фабричный метод</h2>
        <pre style="font-size: 14px;">
            <code>function Factory() {</code>
            <code>    this.create = function(type) {</code>
            <code>        this.person = null;</code>
            <code>        switch (type) {</code>
            <code>            case 'Bob':</code>
            <code>                this.person = new Bob();</code>
            <code>                break;</code>
            <code>            case 'Piter':</code>
            <code>                this.person = new Piter();</code>
            <code>                break;</code>
            <code>            default:</code>
            <code>                return this.person;</code>
            <code>         }</code>
            <code>         this.person.prefix = 'Hello';</code>
            <code>         return this.person;</code>
            <code>    };</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Фабричный метод</h2>
        <pre>
            <code>const person = new Factory();</code>
            <code>const bob = person.create('Bob');</code>
            <code>bob.say();</code>
            <code>const piter = person.create('Piter');</code>
            <code>piter.say();</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Абстрактная фабрика</h2>
        <pre>
            <code>function Person(name) {</code>
            <code>    this.prefix = '';</code>
            <code>    this.say = function () {</code>
            <code>        console.log(`${this.prefix}, i'm ${name}`);</code>
            <code>    }</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Абстрактная фабрика</h2>
        <pre>
            <code>function PersonFactory() {</code>
            <code>    this.create = function (name, welcomeText) {</code>
            <code>        const person = new Person(name);</code>
            <code>        person.prefix = welcomeText;</code>
            <code>        return person;</code>
            <code>    };</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Абстрактная фабрика</h2>
        <pre>
            <code>const personFactory = new PersonFactory();</code>
            <code>const bob = personFactory.create('Bob', 'Hello');</code>
            <code>bob.say();</code>
            <code>const piter = personFactory.create('Piter', 'Hello');</code>
            <code>piter.say();</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Абстрактная фабрика</h2>
        <pre>
            <code>function TreeFactory() {</code>
            <code>    this.create = function (branchCount) {</code>
            <code>        const tree = new Tree();</code>
            <code>        tree.branchCount = branchCount;</code>
            <code>        return tree;</code>
            <code>    };</code>
            <code>}</code>
            <code>const treeFactory = new TreeFactory();</code>
            <code>const oak = treeFactory.create(5);</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Строитель</h2>
        <ul>
            <li>Директор</li>
            <li><mark>Строитель</mark></li>
            <li>Конкретный строитель</li>
            <li>Продукт</li>
        </ul>
        <blockquote>Строитель — это порождающий паттерн проектирования, который позволяет создавать сложные объекты
            пошагово</blockquote>
    </section>

    <section class="slide">
        <h2>Строитель</h2>
        <img src="pictures/builder-2x.png" height="80%" style="display: block; margin: 0 auto;" alt="">
    </section>

    <section class="slide">
        <h2>Строитель</h2>
        <pre>
            <code>function Plant() {</code>
            <code>    this.build = function(builder) {</code>
            <code>        builder.step1();</code>
            <code>        builder.step2();</code>
            <code>        builder.step3();</code>
            <code>        return builder.get();</code>
            <code>    }</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Строитель</h2>
        <pre style="font-size: 18px;">
            <code>function RobotBuilder() {</code>
            <code>    this.robot = null;</code>
            <code>    this.step1 = function() {</code>
            <code>        this.robot = new Robot();</code>
            <code>    }</code>
            <code>    this.step2 = function() {</code>
            <code>        this.robot.arm = 2;</code>
            <code>    }</code>
            <code>    this.get = function() {</code>
            <code>        return this.robot;</code>
            <code>    }</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Строитель</h2>
        <pre>
            <code>function Robot() {</code>
            <code>  this.say = function() {</code>
            <code>    console.log(`Hello, I'm robot with ${this.arm} arms`);</code>
            <code>  }</code>
            <code>}</code>
        </pre>
    </section>
    <section class="slide">
        <h2>Строитель</h2>
        <pre>
            <code>const director = new Plant();</code>
            <code>const robot = director.build(new RobotBuilder);</code>
            <code>const robot1 = director.build(new RobotBuilder);</code>
            <code>robot.say();</code>
            <code>robot1.say();</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Прототип</h2>
        <pre style="font-size: 22px;">
            <code>function Robot() {</code>
            <code>  this.name = '';</code>
            <code>  this.say = function() {</code>
            <code>    console.log(`Hello, I'm a Robot, my name is ${this.name}`);</code>
            <code>  }</code>
            <code>}</code>
            <code>const firstRobot = new Robot();</code>
            <code>firstRobot.name = 'Chappy';</code>
            <code>firstRobot.say();</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Прототип</h2>
        <pre>
            <code>function RobotCloneMaker(proto) {</code>
            <code>    this.proto = proto;</code>
            <code>    this.clone = function() {</code>
            <code>        const robot = new Robot();</code>
            <code>        robot.name = this.proto.name;</code>
            <code>        return robot;</code>
            <code>    }</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Прототип</h2>
        <pre>
            <code>const firstRobot = new Robot();</code>
            <code>firstRobot.name = 'Chappy';</code>
            <code></code>
            <code>const cloneMaker = new RobotCloneMaker(firstRobot);</code>
            <code>const secondRobot = cloneMaker.clone();</code>
            <code>const thirdRobot = cloneMaker.clone();</code>
            <code>secondRobot.say();</code>
            <code>thirdRobot.say();</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Одиночка</h2>
        <pre>
            <code>const simple = {</code>
            <code>    a: 1,</code>
            <code>    b: 2</code>
            <code>};</code>
            <code>const anotherSimple = simple;</code>
            <code>console.log(anotherSimple, anotherSimple === simple);</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Одиночка</h2>
        <pre style="font-size: 22px;">
            <code>function Singletone() {</code>
            <code>  if (this.__proto__.instance) return this.__proto__.instance;</code>
            <code>&nbsp;</code>
            <code>  this.name = 'Bob';</code>
            <code>  this.__proto__.instance = this;</code>
            <code>  return this.__proto__.instance;</code>
            <code>}</code>
            <code>const withProto = new Singletone();</code>
            <code>const withProto1 = new Singletone();</code>
            <code>console.log(withProto, withProto1, withProto === withProto1);</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Одиночка</h2>
        <pre style="font-size: 22px;">
            <code>class SingletoneOne { <span class="comment">// ES7</span></code>
            <code>  static instance;</code>
            <code>  constructor() {</code>
            <code>    if (instance) return instance;</code>
            <code>    this.instance = this;</code>
            <code>  }</code>
            <code>}</code>
            <code>const classProto1 = new SingletoneOne();</code>
            <code>const classProto2 = new SingletoneOne();</code>
            <code>console.log(classProto1, classProto1, classProto1 === classProto2);</code>
        </pre>
    </section>

    <section class="slide">
        <h2 class="shout">Структурные</h2>
    </section>

    <section class="slide">
        <h2>Структурные</h2>
        <ul>
            <li>Адаптер (Adapter)</li>
            <li>Мост (Bridge)</li>
            <li>Компоновщик (Composite)</li>
            <li>Декоратор (Decorator)</li>
            <li>Фасад (Facade)</li>
            <li>Легковес (Flyweight)</li>
            <li>Заместитель (Proxy)</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Адаптер</h2>
        <img src="pictures/adapter-2x.png" height="80%" style="display: block; margin: 0 auto;" alt="">
    </section>

    <section class="slide">
        <h2>Адаптер</h2>
        <pre>
            <code>function calculator(action, a, b) {</code>
            <code>  console.log(action.calc(a, b));</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Адаптер</h2>
        <pre>
            <code>function Division() {</code>
            <code>  this.calc = function (a, b) {</code>
            <code>    return a / b;</code>
            <code>  };</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Адаптер</h2>
        <pre>
            <code>const division = new Division();</code>
            <code>function calculator(action, a, b) {</code>
            <code>  console.log(action.calc(a, b));</code>
            <code>}</code>
            <code>calculator(division, 6, 3);</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Адаптер</h2>
        <pre style="font-size: 18px;">
            <code>function Substraction() {</code>
            <code>  this.first = null;</code>
            <code>  this.second = null;</code>
            <code>  this.setFirst = function(val) {</code>
            <code>    this.first = val;</code>
            <code>  }</code>
            <code>  this.setSecond = function (val) {</code>
            <code>    this.second = val;</code>
            <code>  }</code>
            <code>  this.calc = function () {</code>
            <code>    return this.first - this.second;</code>
            <code>  }</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Адаптер</h2>
        <pre>
            <code><span class="comment">/* interface 1 */</span></code>
            <code>XXX.calc(a, b);<span class="comment">// -> result</span></code>
            <code>&nbsp;</code>
            <code><span class="comment">/* interface 2 */</span></code>
            <code>YYY.setFirst(a);</code>
            <code>YYY.setSecond(b);</code>
            <code>YYY.calc();<span class="comment">// -> result</span></code>
        </pre>
    </section>
    <section class="slide">
        <h2>Адаптер</h2>
        <pre>
            <code>function SubstractionAdapter(substraction) {</code>
            <code>  this.calc = function(a, b) {</code>
            <code>    substraction.setFirst(a);</code>
            <code>    substraction.setSecond(b);</code>
            <code>    return substraction.calc();</code>
            <code>  }</code>
            <code>}</code>
        </pre>
    </section>
    <section class="slide">
        <h2>Мост</h2>
        <blockquote>Мост — это структурный паттерн проектирования, который разделяет один или несколько классов на две
            отдельные иерархии — абстракцию и реализацию, позволяя изменять их независимо друг от друга.</blockquote>
    </section>

    <section class="slide">
        <h2>Мост</h2>
        <pre>
            <code><span class="comment"><s>const cache = new Cache(store);</s></span></code>
            <code>cache.set({key: 111}, 'aaa');</code>
            <code>cache.get('aaa');</code>
            <code>cache.clear();</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Мост</h2>
        <pre style="font-size: 18px;">
            <code><span class="comment">/** Abstraction */</span></code>
            <code>function Store(implementation) {</code>
            <code>  this.setItem = function(key, value) {</code>
            <code>    implementation.setItem(key, value);</code>
            <code>  };</code>
            <code>  this.getItem = function(key) {</code>
            <code>    return implementation.getItem(key);</code>
            <code>  };</code>
            <code>  this.clear = function() {</code>
            <code>    implementation.clear();</code>
            <code>  };</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Мост</h2>
        <pre style="font-size: 16px;">
            <code><span class="comment">/** Implementation */</span></code>
            <code>function FileStorage() {</code>
            <code>  this.setItem = function (key, value) {</code>
            <code><span class="comment">/** save to file*/</span></code>
            <code>    console.log('saved');</code>
            <code>  };</code>
            <code>  this.getItem = function (key) {</code>
            <code><span class="comment">/** read from file*/</span></code>
            <code>    console.log('got');</code>
            <code>  };</code>
            <code>  this.clear = function () {</code>
            <code><span class="comment">/** remove file*/</span></code>
            <code>    console.log('clear');</code>
            <code>  };</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Мост</h2>
        <pre style="font-size: 18px;">
            <code><span class="comment">/** User code */</span></code>
            <code>let store;</code>
            <code>if(typeof window != 'undefined') {</code>
            <code>  store = new Store(localStorage);</code>
            <code>} else {</code>
            <code>  const fileStorage = new FileStorage();</code>
            <code>  store = new Store(fileStorage);</code>
            <code>}</code>
            <code>const cache = new Cache(store);</code>
            <code>cache.set({key: 111}, 'aaa');</code>
            <code>cache.get('aaa');</code>
            <code>cache.clear();</code>

        </pre>
    </section>

    <section class="slide">
        <h2>Декоратор</h2>
        <pre>
            <code>function User(name) {</code>
            <code>  this.name = name;</code>
            <code>  this.say = function() {</code>
            <code>    console.log(`Hello, I'm ${this.name}`);</code>
            <code>  }</code>
            <code>}</code>
            <code>const bob = new User('Bob');</code>
            <code>bob.say();</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Декоратор</h2>
        <pre style="font-size: 20px;">
            <code>function ExtendedUser(user, surname) {</code>
            <code>  this.user = user;</code>
            <code>  this.name = user.name;</code>
            <code>  this.surname = surname;</code>
            <code>  this.say = function () {</code>
            <code>    console.log(`Hello, I'm ${this.name} ${this.surname}`);</code>
            <code>  }</code>
            <code>}</code>
            <code>const Bob = new User('Bob');</code>
            <code>const BobMarko = new ExtendedUser(Bob, 'Marko');</code>
            <code>BobMarko.say();</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Фасад</h2>
        <pre style="font-size: 20px;">
            <code>function complicatedFunction1(value) {</code>
            <code>  console.log(`Do something very complicated with `);</code>
            <code>  return true;</code>
            <code>}</code>
            <code>function complicatedFunction2() {</code>
            <code>  console.log('Do something complicated');</code>
            <code>}</code>
            <code>function complicatedFunction3() {</code>
            <code>  console.log('Do something else');</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Фасад</h2>
        <pre style="font-size: 20px;">
            <code>function Facade(value) {</code>
            <code>  this.value = value;</code>
            <code>  this.doSomething = function() {</code>
            <code>    if (complicatedFunction1(value)) {</code>
            <code>      complicatedFunction2();</code>
            <code>    }</code>
            <code>    complicatedFunction3();</code>
            <code>  }</code>
            <code>}</code>
            <code>const doIt = new Facade('Some data');</code>
            <code><mark>doIt.doSomething();</mark></code>
        </pre>
    </section>

    <section class="slide">
        <h2>Заместитель</h2>
        <pre style="font-size: 20px;">
            <code>function ConsoleProxy() {</code>
            <code>  this.log = function(message) {</code>
            <code>    console.log('======== BEFORE ========');</code>
            <code>    console.log(message);</code>
            <code>    console.log('======== AFTER ========');</code>
            <code>  }</code>
            <code>}</code>
            <code></code>
            <code>const console2 = new ConsoleProxy();</code>
            <code>console2.log('Hello');</code>

        </pre>
    </section>




























    <section class="slide">
        <h2>Самостоятельное изучение</h2>
        <ul>
            <li><a href="https://developer.mozilla.org/ru/docs/DOM/DOM_Reference">Руководство по DOM</a>,
            <a href="https://learn.javascript.ru/introduction-browser-events">Браузерные события</a></li>
            <li><a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Shadow_DOM">Shadow DOM</a>,
                <a href="https://learn.javascript.ru/shadow-dom">еще Shadow DOM</a>
                и <a href="http://w3c.github.io/webcomponents/spec/shadow/">спецификация</a>
            </li>
            <li><a href="https://www.youtube.com/watch?v=cCOL7MC4Pl0">Jake Archibald: In The Loop - JSConf.Asia 2018</a></li>
            <li><a href="https://habr.com/ru/company/ruvds/blog/337042/">Как работает JS: обзор движка, механизмов времени выполнения, стека вызовов</a></li>
            <li><a href="https://developer.mozilla.org/ru/docs/Web/API/Window/localStorage">LocaStorage</a> и
            <a href="https://developer.mozilla.org/ru/docs/Web/API/Window/sessionStorage">sessionStorage</a></li>

        </ul>
    </section>

    <section class="slide">
        <h2>Спасибо!</h2>
        <table class="simple-table">
            <tr>
                <td>
                    <p>
                        <strong>Denis Zavgorodny</strong>
                        <br /> web technologist, founder of @ChernivtsiJS,
                        <br />mentor at @NodeSchool Chernivtsi
                    </p>
                    <p>
                        <a href="https://twitter.com/DenisZavgorodny">@DenisZavgorodny</a>
                    </p>
                    <p>
                        <a href="mailto:denis.zavgorodny@gmail.com">denis.zavgorodny@gmail.com</a>
                    </p>
                </td>
            </tr>
        </table>
    </section>

	<div class="progress"></div>

	<script src="shower-core/shower.min.js"></script>
	<!-- Copyright © 2017 Yours Truly, Famous Inc. -->

</body>
</html>
